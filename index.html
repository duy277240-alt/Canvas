<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="D√ÅN_M√É_X√ÅC_MINH_C·ª¶A_B·∫†N_V√ÄO_ƒê√ÇY" />
    <meta name="description" content="Canvas To√°n H·ªçc - Tr√¨nh so·∫°n th·∫£o to√°n h·ªçc ƒëa nƒÉng: H·ªón s·ªë, CƒÉn b·∫≠c n, T√≠ch ph√¢n, H√¨nh h·ªçc. H·ªó tr·ª£ ƒë·∫ßy ƒë·ªß t·ª´ l·ªõp 1 ƒë·∫øn l·ªõp 12.">
    <title>Canvas To√°n H·ªçc Pro | ƒê·∫ßy ƒê·ªß K√Ω Hi·ªáu L·ªõp 1-12</title>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true},
        messageStyle: "none"
      });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    
    <style>
        :root { --primary: #0f172a; --secondary: #334155; --accent: #38bdf8; --success: #22c55e; --bg: #f1f5f9; }
        body { font-family: 'Inter', 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; background: var(--bg); color: #1e293b; }
        
        header { background: var(--primary); color: white; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
        .logo-area { display: flex; align-items: center; gap: 10px; }
        .version-tag { font-size: 10px; background: var(--accent); color: var(--primary); padding: 2px 6px; border-radius: 4px; font-weight: bold; }

        /* H·ªá th·ªëng Toolbar m·ªõi */
        .toolbar { background: white; padding: 12px; border-bottom: 1px solid #e2e8f0; display: flex; flex-direction: column; gap: 10px; overflow-x: auto; }
        .tool-group { display: flex; gap: 8px; align-items: center; white-space: nowrap; padding-bottom: 5px; border-bottom: 1px dashed #f1f5f9; }
        .tool-group:last-child { border-bottom: none; }
        .group-name { font-size: 11px; font-weight: 700; color: #64748b; min-width: 100px; text-transform: uppercase; border-right: 2px solid #e2e8f0; margin-right: 5px; }
        
        button { padding: 6px 12px; cursor: pointer; border: 1px solid #e2e8f0; background: #fff; border-radius: 6px; font-size: 13px; font-weight: 500; transition: all 0.2s; }
        button:hover { border-color: var(--accent); background: #f0f9ff; color: var(--primary); }
        .btn-math { font-family: 'Times New Roman', serif; font-style: italic; font-size: 15px; }
        .btn-hot { background: #fff7ed; border-color: #fdba74; }

        .main { display: flex; flex: 1; overflow: hidden; padding: 12px; gap: 12px; }
        .pane { display: flex; flex-direction: column; flex: 1; background: white; border-radius: 12px; border: 1px solid #e2e8f0; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .label { background: #f8fafc; padding: 10px 16px; font-size: 12px; font-weight: 700; color: #475569; border-bottom: 1px solid #e2e8f0; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; }
        
        textarea { flex: 1; padding: 20px; font-size: 16px; border: none; resize: none; font-family: 'Fira Code', 'Consolas', monospace; outline: none; line-height: 1.6; color: #334155; }
        #preview { flex: 1; padding: 40px; overflow-y: auto; font-size: 20px; line-height: 1.8; font-family: 'Times New Roman', serif; background: white; color: black; }
        
        .feedback-pane { width: 320px; }

        @media print {
            header, .toolbar, .feedback-pane, .label, textarea { display: none !important; }
            .main { display: block; padding: 0; }
            .pane { border: none; box-shadow: none; }
            #preview { padding: 0; width: 100%; }
        }
    </style>
</head>
<body>

<header>
    <div class="logo-area">
        <span style="font-size: 1.3rem; font-weight: 900;">üìê CANVAS MATH</span>
        <span class="version-tag">V3.0 PRO</span>
    </div>
    <div style="display: flex; gap: 10px;">
        <button onclick="copySite()" style="background:#334155; color:white; border:none;">üîó Chia s·∫ª</button>
        <button onclick="window.print()" style="background:var(--success); color:white; border:none; padding: 8px 20px;">üñ®Ô∏è XU·∫§T FILE IN (PDF)</button>
    </div>
</header>

<div class="toolbar">
    <div class="tool-group">
        <div class="group-name">C∆° b·∫£n & H·ªón s·ªë</div>
        <button class="btn-hot" onclick="add('a\\frac{b}{c}')">$a\frac{b}{c}$ H·ªón s·ªë</button>
        <button class="btn-hot" onclick="add('\\frac{a}{b}')">$\frac{a}{b}$ Ph√¢n s·ªë</button>
        <button onclick="add('\\times ')">$\times$ Nh√¢n</button>
        <button onclick="add('\\div ')">$\div$ Chia</button>
        <button onclick="add('\\pm ')">$\pm$ C·ªông tr·ª´</button>
    </div>
    
    <div class="tool-group">
        <div class="group-name">L·ªõp 6 - 9</div>
        <button onclick="add('a^n')">$a^n$ L≈©y th·ª´a</button>
        <button onclick="add('\\sqrt{x}')">$\sqrt{x}$ CƒÉn b·∫≠c 2</button>
        <button onclick="add('\\sqrt[3]{x}')">$\sqrt[3]{x}$ CƒÉn b·∫≠c 3</button>
        <button onclick="add('\\triangle ')">$\triangle$ Tam gi√°c</button>
        <button onclick="add('\\perp ')">$\perp$ Vu√¥ng g√≥c</button>
        <button onclick="add('\\parallel ')">$\parallel$ Song song</button>
        <button onclick="add('\\widehat{ABC}')">$\widehat{A}$ G√≥c</button>
        <button onclick="add('^\\circ ')">$^\circ$ ƒê·ªô</button>
    </div>

    <div class="tool-group">
        <div class="group-name">L·ªõp 10 - 12</div>
        <button class="btn-math" onclick="add('\\int_{a}^{b} f(x)dx')">$\int$ T√≠ch ph√¢n</button>
        <button class="btn-math" onclick="add('\\lim_{x \\to x_0}')">$\lim$ Gi·ªõi h·∫°n</button>
        <button class="btn-math" onclick="add('\\sum_{i=1}^{n}')">$\sum$ T·ªïng</button>
        <button class="btn-math" onclick="add('\\vec{a}')">$\vec{a}$ Vect∆°</button>
        <button onclick="add('\\log_a b')">$\log$ Logarit</button>
        <button onclick="add('\\sin x')">$\sin$</button>
        <button onclick="add('\\cos x')">$\cos$</button>
        <button onclick="add('\\infty ')">$\infty$ V√¥ c·ª±c</button>
    </div>

    <div class="tool-group">
        <div class="group-name">Logic & So s√°nh</div>
        <button onclick="add('\\in ')">$\in$ Thu·ªôc</button>
        <button onclick="add('\\subset ')">$\subset$ T·∫≠p con</button>
        <button onclick="add('\\forall ')">$\forall$ V·ªõi m·ªçi</button>
        <button onclick="add('\\exists ')">$\exists$ T·ªìn t·∫°i</button>
        <button onclick="add('\\neq ')">$\neq$ Kh√°c</button>
        <button onclick="add('\\approx ')">$\approx$ X·∫•p x·ªâ</button>
        <button onclick="add('\\Rightarrow ')">$\Rightarrow$ Suy ra</button>
        <button onclick="add('\\Leftrightarrow ')">$\Leftrightarrow$ T∆∞∆°ng ƒë∆∞∆°ng</button>
    </div>
</div>

<div class="main">
    <div class="pane">
        <div class="label">KHU V·ª∞C NH·∫¨P LI·ªÜU <span>Markdown + LaTeX</span></div>
        <textarea id="editor" oninput="update()" placeholder="V√≠ d·ª•: T√≠nh h·ªón s·ªë $2\frac{1}{2} + 3\frac{3}{4}$..."></textarea>
    </div>
    
    <div class="pane">
        <div class="label">XEM TR∆Ø·ªöC TRANG IN <span>A4 Standard</span></div>
        <div id="preview"></div>
    </div>

    <div class="pane feedback-pane">
        <div class="label">C·ªòNG ƒê·ªíNG G√ìP √ù</div>
        <div style="padding: 10px; flex: 1; overflow-y: auto;">
            <script src="https://utteranc.es/client.js"
                repo="duy277240-alt/Canvas"
                issue-term="pathname"
                theme="github-light"
                crossorigin="anonymous"
                async>
            </script>
        </div>
    </div>
</div>

<script>
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');

    // L∆∞u tr·ªØ d·ªØ li·ªáu th√¥ng minh
    editor.value = localStorage.getItem('canvas_v3_content') || "";

    function update() {
        localStorage.setItem('canvas_v3_content', editor.value);
        let content = editor.value
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\*(.*?)\*/g, '<em>$1</em>')
            .replace(/\n/g, '<br>');
        
        preview.innerHTML = content;
        if (window.MathJax) {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub, preview]);
        }
    }

    function add(code) {
        const start = editor.selectionStart;
        const end = editor.selectionEnd;
        const text = editor.value;
        const before = text.substring(0, start);
        const after = text.substring(end);
        
        // B·ªçc trong d·∫•u $ n·∫øu l√† k√Ω hi·ªáu LaTeX
        const markup = `$${code}$`;
        
        editor.value = before + markup + after;
        update();
        editor.focus();
        
        // ƒê·∫∑t con tr·ªè v√†o gi·ªØa c√°c k√Ω hi·ªáu tr·ªëng (v√≠ d·ª• gi·ªØa { })
        if (code.includes('{')) {
            const pos = before.length + markup.indexOf('{') + 1;
            editor.setSelectionRange(pos, pos);
        }
    }

    function copySite() {
        navigator.clipboard.writeText(window.location.href);
        alert("ƒê√£ copy link trang web! H√£y chia s·∫ª cho m·ªçi ng∆∞·ªùi nh√©.");
    }

    window.onload = update;
</script>

</body>
</html>
